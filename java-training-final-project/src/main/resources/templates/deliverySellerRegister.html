<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<title>Register Cases</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/inventory.js"></script>
<script type="text/javascript" src="js/buying.js"></script>
</head>
<body>

	 <div th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
        <input type="hidden" id="isAdmin" value="true"/>
    </div>
    
<!--     <div th:if="${#authorization.expression('hasRole(''ROLE_STORE_SELLER'')')}"> -->
<!--         <input type="hidden" id="isStoreSeller" value="true"/> -->
<!--     </div> -->
    
    <input type="hidden" id="isDeliverySeller" value="true"/>

	<label>Filter Design: </label>
	<select id="designSelect">
		<option value="all">All</option>
		<option th:each="design:${designs}" th:value="${design.name}"
			th:text="${design.name}"></option>
	</select>
	
	<label>Filter Device: </label>
	<select id="deviceSelect">
		<option value="all">All</option>
		<option th:each="device:${devices}" th:value="${device.name}"
			th:text="${device.name}"></option>
	</select>

	<div id="result">
		<table border="1">
			<tr>
				<th>INDEX</th>
				<th>DESIGN</th>
				<th>DEVICE</th>
				<th>PRICE</th>
				<th>BUY</th>
			</tr>		
			<tr th:each="casewrapper,itrStat : ${inventory}">
					<td th:text="${itrStat.count}"></td>
					<td th:text="${casewrapper.myCase.design.name}"></td>
					<td th:text="${casewrapper.myCase.device.name}"></td>
					<td th:text="'$'+${casewrapper.myCase.price}"></td>
					<div sec:authorize="hasRole('ROLE_STORE_SELLER')">
						<td>
							<label>Quantity:</label>
							<input type="hidden" th:id="${casewrapper.id}+'_data'" th:value= "${casewrapper.myCase.design.name}+'_'+${casewrapper.myCase.device.name}+'_'+${casewrapper.myCase.price}+'_'+${casewrapper.myCase.id}"/>
							<select th:id="${casewrapper.id}+'_quantity'">
								<option>1</option>
								<option>2</option>
								<option>3</option>
								<option>4</option>
								<option>5</option>
							</select>
							<button type="button" class="buyCase" th:id="${casewrapper.id}">Buy!</button>
						</td>
					</div>
			</tr>
		</table>
	</div>
	
	<select id="pageSelect">
<!-- 	<div id="pagination"> -->
			<option th:each="i: ${#numbers.sequence( 1, pageQuantity)}"
	        th:value="${i}"
	        th:text="${i}"></option>
<!-- 	</div> -->
	</select>
	
	<label>Size:</label>
	<select id="sizeSelect">
		<option>5</option>
		<option>10</option>
		<option>15</option>
	</select>
	
	<div sec:authorize="hasRole('ROLE_STORE_SELLER')">
		<p>Current Sale:</p>
		<input type="hidden" id="productQuantity" value="0"/>
		<div id="currentSale">No product added</div>
		
		<div id="customerData">
			<p>Customer Data</p>
			<form action="/buy" id="buyingForm" method="post">
				<label>Name: </label><input type="text" name="name" id="name"/>
				<label>Age: </label><input type="number" name="age" id="age"/>
				<label>Gender: </label>
				<select name="gender" id="gender"><option value="M">M</option><option value="F">F</option></select>
				<label>Location: </label><input type="text" name="location" id="location"/>
			</form>
			
		</div>
		
		<button type="button" id="confirmSale">Confirm Sale</button>
		<button type="button" id="resetSale">Reset Sale</button>
	</div>
	
	
	<a th:href="@{/}">Back to the homepage</a>
</body>
</html>